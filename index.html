<!DOCTYPE html>
<html lang="ko">

<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SDLSPY8SHN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SDLSPY8SHN');
</script>

  <meta name="google-site-verification" content="HCA5BIJ-jmSS98nx3NSFpQPbITYMLOoseTkT_-ciPw8" />
  <meta name="naver-site-verification" content="42a44a18bc73765e5490921ab34466a98da90ddc" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Myeongjo:wght@800&display=swap"
    rel="stylesheet">
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <meta name="description" content="인공지능이 당신이 마기꾼인지 판단해줍니다">

  <meta property="og:type" content="website">
  <meta property="og:title" content="마기꾼 테스트">
  <meta property="og:description" content="인공지능이 당신이 마기꾼인지 판단해줍니다">
  <meta property="og:image" content="https://i.imgur.com/RfyTsQL.png">
  <meta property="og:url" content="https://maskrealorfake.netlify.app/">

  <link rel="canonical" href="https://maskrealorfake.netlify.app/index.html">


  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>마기꾼 테스트</title>

  <link rel="stylesheet" href="https://unpkg.com/ionicons@4.4.2/dist/css/ionicons.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:900">

  <script type="text/javascript"
    src="https://platform-api.sharethis.com/js/sharethis.js#property=61f7c44d9343fb0019ed0c1d&product=inline-share-buttons"
    async="async"></script>

  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="style.css">

</head>


<body>
  <a class="topname" onClick="window.location.reload()" style="cursor: pointer;">마기꾼 테스트</a>



  <div style="text-align : center;">
    <img class=masktoon src="https://i.imgur.com/RfyTsQL.png" alt="My Image">

  </div>



  <section>
    <div class="title_box">
      <img class=mask_img src="https://i.imgur.com/PZFM6P6.png" alt="Mask Image">
      <span class="title">＜마기꾼 테스트＞<span>
          <img class=mask_img src="https://i.imgur.com/PZFM6P6.png" alt="Mask Image">
    </div>

    <h2 class="subtitle">인공지능(AI)이 마기꾼인지 판단하고 <br> 마스크로 가려진 얼굴을 예측합니다. </h2>
    <h2 class="donot">더 이상 속지 말아요!</h2>

    <div class="vl"></div>

  </section>

  <!-- <button type="button" onclick="init()">시작</button> -->


  <div id="app-cover">
    <input type="checkbox" id="checkbox">
    <div id="path"></div>
    <div id="knob">
      <div id="bow"><i class="icon ion-md-bowtie"></i></div>
    </div>
    <div id="gender">
      <div id="fe">FE</div>
      <div id="male"><span>MALE</span></div>
    </div>
  </div>

  <section>
    <p class="gender-giude"><span class="half_background">1. 성별을 선택하세요</span></p>

  </section>


  <!-- Upload  -->
  <div>
    <form id="file-upload-form" class="uploader">
      <input id="file-upload" type="file" name="fileUpload" accept="image/*" />

      <label for="file-upload" style="
            margin-bottom: 20%" id="file-drag">
        <img id="file-image" src="#" alt="Preview" class="hidden">
        <div id="start">
          <i class="fa fa-download" aria-hidden="true"></i>
          <div class="two_order"><span class="half_background">2. 사진을 업로드 하세요!</span><br>(눈이 제대로 나온 정면사진일수록 정확도가 높습니다)
          </div>
          <div id="notimage" class="hidden">Please select an image</div>
        </div>
        <div id="response" class="hidden">
          <div id="messages"></div>
          <progress class="progress" id="file-progress" value="0">
            <span>0</span>%
          </progress>
        </div>

        <div id="loading" class="animated bounce" style="display:none">
          <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
          </div>
          <p class="text-center">AI가 당신이 마기꾼인지 <br> 분석중입니다.</p>
        </div>


        <p class="result-message"></p>
        <p class="result-message2"></p>
        <div id="label-container"></div>


      </label>
      <div class="third_order"><span class="half_background">3.결과를 공유하세요!</span></div>

      <div class="sharethis-inline-share-buttons" style='margin-bottom: 30%;'></div>
    </form>

    <div class="counter">
      <p class="counter_p">Views</p>
      <h1 class="counter_h" id="count">0</h1>
    </div>



    <p class="developer">개발자 이메일 | s5834@naver.com </p>
    <p class="ment">코로나로 모두가 힘들고 답답하겠지만 마스크 잘쓰고 다녀요! <br> 이제는 마스크 없이 살 수 없는 얼굴이 되어버린걸요! <br><br> *사진은 어디에도 저장되지 않습니다.*
    </p>
    <div class = "ad-banner">
      <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-d62wvYutiUGYmIil" data-ad-width="320"
      data-ad-height="100"></ins>

    </div>
    
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>


  </div>
  <script>

    const count = document.getElementById('count');

    updateVisitCount();

    function updateVisitCount() {
      fetch('https://api.countapi.xyz/update/danielazocardev/codepen/?amount=1')
        .then(res => res.json())
        .then(res => {
          count.innerHTML = res.value
        });
    }
  </script>






  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

    // the link to your model provided by Teachable Machine export panel
    let URL;
    const urlmale = "https://teachablemachine.withgoogle.com/models/e5DnVAew-/"
    const urlFemale = "https://teachablemachine.withgoogle.com/models/KXwbipVKk/";

    let model, webcam, labelContainer, maxPredictions;


    // Load the image model and setup the webcam
    async function init() {


      if (document.getElementById("checkbox").checked) {
        URL = urlFemale;
      } else {
        URL = urlmale;
      }



      const modelURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";

      // load the model and metadata
      // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
      // or files from your local hard drive
      // Note: the pose library adds "tmImage" object to your window (window.tmImage)
      model = await tmImage.load(modelURL, metadataURL);
      maxPredictions = model.getTotalClasses();

      labelContainer = document.getElementById("label-container");
      for (let i = 0; i < maxPredictions; i++) { // and class labels
        labelContainer.appendChild(document.createElement("div"));
      }


    }

    var percent;
    // run the webcam image through the image model
    async function predict() {
      // predict can take in an image, video or canvas html element
      var image = document.getElementById("file-image")
      const prediction = await model.predict(image, false);
      percent = prediction[1].probability.toFixed(2) * 100;
      $('.result-message').html("당신은 " + percent + "%의 확률로 마기꾼입니다.");
      var resultMessege;
      var rpercent = 100 - percent;
      if (rpercent >= 95) {
        resultMessege = "당신은 상위 5%의 외모입니다. <br> 외모가 마스크를 그냥 뚫고 나옵니다. <br> 여자분이면 개발자에게 연락바랍니다."
      }
      else if (rpercent >= 90) {
        resultMessege = "당신은 상위 10%의 외모입니다. <br> 이러한 눈과 두상을 가진 당신은 하관이 못생겼을리가 없습니다. <br>마스크를 쓰고 다니는 건 전 우주적 손해이니 <br>투명마스크를 끼고 다니세요."
      }
      else if (rpercent >= 80) {
        resultMessege = "당신은 상위 20%의 외모입니다. <br> 어딜가나 당신을 좋아하는 학생들이 한 명씩은 있습니다. <br>밥 먹을때는 자신있게 마스크를 벗으셔도 됩니다."
      }
      else if (30 >= rpercent && rpercent > 20) {
        resultMessege = "당신은 마기꾼 초범입니다. <br> 좋아하는 사람 앞에서는 마스크를 어떻게든 벗지 마세요."
      }
      else if (rpercent <= 20 && rpercent > 5) {
        resultMessege = "당신은 무기징역 마기꾼입니다. <br> 더 이상 사람들을 속이지 말고 마스크 보다는 <br>방독면을 착용하고 다니세요."
      }
      else if (rpercent <= 5) {
        resultMessege = "말아낌. <br> 화이팅."
      }
      else {
        resultMessege = "그냥 일반인이군요. <br>하관은 예상 가능하게 생긴 것 같습니다."
      }
      $('.result-message2').html(resultMessege);


      var barWidth;
      for (let i = 0; i < maxPredictions; i++) {
        if (prediction[i].probability.toFixed(2) > 0.1) {
          barWidth = Math.round(prediction[i].probability.toFixed(2) * 100) + "%";
        } else if (prediction[i].probability.toFixed(2) >= 0.01) {
          barWidth = "4%"
        } else {
          barWidth = "2%"
        }
        var label = "<div class='animal-label d-flex align-items-center'>" + prediction[i].className + "</div>"
        var bar = "<div class='bar-container position-relative container'><div class='" + prediction[i].className + "-box'></div><div class='d-flex justify-content-center align-items-center " + prediction[i].className + "-bar' style='width: " + barWidth + "'><span class='d-block percent-text'>" + Math.round(prediction[i].probability.toFixed(2) * 100) + "%</span></div></div>"
        labelContainer.childNodes[i].innerHTML = label + bar;
      }
    }
  </script>
  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <script>
    $(function () {
      var checkbox = $("#checkbox"),
        path = $("#path"),
        bow = $("#bow"),
        male = $("#male");

      checkbox.on("change", function () {
        if ($(this).is(":checked")) {
          male.removeClass("ma");
          setTimeout(function () {
            path.addClass("fe");
            male.addClass("fe");
            bow.addClass("fe");
          }, 390);
        } else {
          male.addClass("ma");
          setTimeout(function () {
            path.removeClass("fe");
            male.removeClass("fe");
            bow.removeClass("fe");
          }, 390);
        }
      });
    });

  </script>


  <script>
    // File Upload
    //
    function ekUpload() {
      function Init() {
        console.log("Upload Initialised");

        var fileSelect = document.getElementById("file-upload"),
          fileDrag = document.getElementById("file-drag"),
          submitButton = document.getElementById("submit-button");

        fileSelect.addEventListener("change", fileSelectHandler, false);

        // Is XHR2 available?
        var xhr = new XMLHttpRequest();
        if (xhr.upload) {
          // File Drop
          fileDrag.addEventListener("dragover", fileDragHover, false);
          fileDrag.addEventListener("dragleave", fileDragHover, false);
          fileDrag.addEventListener("drop", fileSelectHandler, false);
        }

      }

      function fileDragHover(e) {
        var fileDrag = document.getElementById("file-drag");

        e.stopPropagation();
        e.preventDefault();

        fileDrag.className =
          e.type === "dragover" ? "hover" : "modal-body file-upload";
      }

      function fileSelectHandler(e) {
        // Fetch FileList object
        var files = e.target.files || e.dataTransfer.files;

        // Cancel event and hover styling
        fileDragHover(e);

        // Process all File objects
        for (var i = 0, f; (f = files[i]); i++) {
          parseFile(f);
          uploadFile(f);
        }
      }

      // Output
      function output(msg) {
        // Response
        var m = document.getElementById("messages");
        m.innerHTML = msg;

      }

      function parseFile(file) {
        console.log(file.name);
        // output("<strong>" + encodeURI(file.name) + "</strong>");

        // var fileType = file.type;
        // console.log(fileType);
        var imageName = file.name;

        var isGood = /\.(?=gif|jpg|png|jpeg)/gi.test(imageName);
        if (isGood) {

          document.getElementById("start").classList.add("hidden");
          document.getElementById("response").classList.remove("hidden");
          document.getElementById("notimage").classList.add("hidden");
          // Thumbnail Preview
          document.getElementById("file-image").classList.remove("hidden");
          document.getElementById("file-image").src = window.webkitURL.createObjectURL(file);
          $('#loading').show();
          init().then(() => {
            predict();
            $('#loading').hide();
          });

        } else {
          document.getElementById("file-image").classList.add("hidden");
          document.getElementById("notimage").classList.remove("hidden");
          document.getElementById("start").classList.remove("hidden");
          document.getElementById("response").classList.add("hidden");
          document.getElementById("file-upload-form").reset();
        }
      }

      function setProgressMaxValue(e) {
        var pBar = document.getElementById("file-progress");

        if (e.lengthComputable) {
          pBar.max = e.total;
        }
      }

      function updateFileProgress(e) {
        var pBar = document.getElementById("file-progress");

        if (e.lengthComputable) {
          pBar.value = e.loaded;
        }
      }

      function uploadFile(file) {
        var xhr = new XMLHttpRequest(),
          fileInput = document.getElementById("class-roster-file"),
          pBar = document.getElementById("file-progress"),
          fileSizeLimit = 1024; // In MB
        if (xhr.upload) {
          // Check if file is less than x MB
          if (file.size <= fileSizeLimit * 1024 * 1024) {
            // Progress bar
            pBar.style.display = "inline";
            xhr.upload.addEventListener("loadstart", setProgressMaxValue, false);
            xhr.upload.addEventListener("progress", updateFileProgress, false);

            // File received / failed
            xhr.onreadystatechange = function (e) {
              if (xhr.readyState == 4) {
                // Everything is good!
                // progress.className = (xhr.status == 200 ? "success" : "failure");
                // document.location.reload(true);
              }
            };

            // Start upload
            xhr.open(
              "POST",
              document.getElementById("file-upload-form").action,
              true
            );
            xhr.setRequestHeader("X-File-Name", file.name);
            xhr.setRequestHeader("X-File-Size", file.size);
            xhr.setRequestHeader("Content-Type", "multipart/form-data");
            xhr.send(file);
          } else {
            output("Please upload a smaller file (< " + fileSizeLimit + " MB).");
          }
        }
      }

      // Check for the various File API support.
      if (window.File && window.FileList && window.FileReader) {
        Init();
      } else {
        document.getElementById("file-drag").style.display = "none";
      }
    }
    ekUpload();
  </script>





</body>
<!-- Copyright (c) 2022 by Himalaya Singh (https://codepen.io/himalayasingh/pen/gdqXBj)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->


<!-- Copyright (c) 2022 by Matt  (https://codepen.io/uixmat/pen/yadZXv)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->


<!-- Copyright (c) 2022 by DanielAzocarDev (https://codepen.io/danielazocardev/pen/NWqGxMX)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

<!-- href="https://www.flaticon.com/kr/free-icons/" title="마스크 아이콘">마스크 아이콘  제작자: mangsaabguru - Flaticon -->



</html>